const body=document.querySelector("body"),openNav=document.querySelector(".open-nav"),nav=document.querySelector(".main-nav"),navLinks=document.querySelectorAll(".link-list a"),cardButtons=document.querySelectorAll(".card-img-button"),modals=document.querySelectorAll(".mod"),modalCloseButtons=document.querySelectorAll(".close-mod"),overlay=document.querySelector(".overlay"),form=document.querySelector("form"),nameDiv=document.querySelector(".form-row.name"),emailDiv=document.querySelector(".form-row.email"),nameStatusIcon=nameDiv.querySelector(".status-icon"),emailStatusIcon=emailDiv.querySelector(".status-icon"),nameInput=document.querySelector('input[name="name"]'),emailInput=document.querySelector('input[type="email"]'),mailButton=document.querySelector('input[type="submit"]'),statusMessage=document.querySelector(".form-status-message");function fadeInOut(s){s.classList.contains("show")?(s.classList.remove("fadeIn"),s.addEventListener("transitionend",function(e){s.classList.remove("show")},{capture:!1,once:!0,passive:!1})):(s.classList.add("show"),setTimeout(function(){s.classList.add("fadeIn")},20))}function menuHandler(){nav.classList.contains("show")?(nav.classList.toggle("show"),openNav.innerHTML='<span>Open</span><span>Menu</span><i class="fas fa-chevron-down arrow"></i>',openNav.style.transform="rotate(270deg)",openNav.style.marginTop=""):(nav.classList.toggle("show"),openNav.innerHTML='<span>Close</span><span>Menu</span><i class="fas fa-chevron-down arrow"></i>',openNav.style.transform="rotate(90deg)",openNav.style.marginTop="1.5rem")}function openModal(e){const s=window.scrollY,a=e.target.id;modals.forEach(e=>{e.id===a&&(fadeInOut(e),overlay.classList.toggle("show"),body.style.position="fixed",body.style.top=`-${s}px`,body.style.width="100%")})}function closeModal(e){const s=body.style.top;modals.forEach(e=>{e.classList.contains("show")&&(fadeInOut(e),overlay.classList.toggle("show"),body.style.position="",body.style.top="",window.scrollTo(0,-1*parseInt(s||0)))})}function checkName(e){var s=nameInput.value.trim();0<s.length&&nameDiv.classList.contains("error")&&(nameDiv.classList.remove("error"),nameDiv.classList.add("success"),nameStatusIcon.innerHTML='<i class="fas fa-check"></i>'),""===s&&(nameDiv.classList.contains("success")&&nameDiv.classList.remove("success"),nameDiv.classList.add("error"),nameStatusIcon.innerHTML='<i class="fas fa-exclamation"></i>')}function checkEmail(e){var s=emailInput.value.trim();0<=s.length&&isEmail(s)&&(emailDiv.classList.contains("error")&&emailDiv.classList.remove("error"),emailDiv.classList.add("success"),emailStatusIcon.innerHTML='<i class="fas fa-check"></i>'),""===s&&(emailDiv.classList.contains("success")&&emailDiv.classList.remove("success"),emailDiv.classList.add("error"),emailStatusIcon.innerHTML='<i class="fas fa-exclamation"></i>')}function isEmail(e){return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)}function isEmailFormCorrect(){if(nameDiv.classList.contains("success")&&emailDiv.classList.contains("success"))return!0}function ajaxPOST(){var e=$(form).serialize();$.ajax({type:"POST",url:$(form).attr("action"),data:e}).done(e=>{console.log(e),statusMessage.innerHTML=e,displayFormStatus()}).fail(e=>{console.log(e),""!==e.responseText?statusMessage.innerHTML=`${e.responseText}`:statusMessage.innerHTML="<h6>Oops! An error occured!</h6> <p>Your message could not be sent. Please try again.</p>",displayFormStatus()})}function displayFormStatus(){setTimeout(fadeInOut(statusMessage),100),clearTimeout(),setTimeout(function(){fadeInOut(statusMessage),form.reset(),emailDiv.classList.remove("success"),nameDiv.classList.remove("success"),emailStatusIcon.innerHTML="",nameStatusIcon.innerHTML=""},4e3)}function formEventRouter(e){e.target===nameInput?checkName(e):e.target===emailInput&&checkEmail(e)}openNav.addEventListener("click",menuHandler),navLinks.forEach(e=>e.addEventListener("click",menuHandler)),cardButtons.forEach(e=>e.addEventListener("click",e=>{openModal(e)})),modalCloseButtons.forEach(e=>e.addEventListener("click",closeModal)),form.addEventListener("click",e=>{formEventRouter(e)}),form.addEventListener("keydown",e=>{formEventRouter(e)}),form.addEventListener("change",e=>{formEventRouter(e)}),form.addEventListener("submit",e=>{e.preventDefault(),isEmailFormCorrect()?ajaxPOST():(checkName(e,nameDiv,nameInput),checkEmail(e,emailDiv,emailInput))});